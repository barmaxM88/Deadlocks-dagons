@page "/help"
@inject NavigationManager NavManager

@code {
    private string? backUrl;

    protected override void OnInitialized()
    {
        var uri = new Uri(NavManager.Uri);
        var query = Microsoft.AspNetCore.WebUtilities.QueryHelpers.ParseQuery(uri.Query);
        if (query.TryGetValue("from", out var returnTo))
        {
            backUrl = returnTo;
        }
    }
}

<h3>📖 Путеводитель для Искателей Приключений</h3>
<p>Перед тобой мир, где каждая ошибка в коде может обернуться ловушкой, безысходностью или хаосом. Этот путеводитель поможет тебе распознавать опасности до того, как они настигнут твою партию.</p>

<hr />
<h4>⚡ Комната с ловушкой (Критическая секция)</h4>
<p>В обычном коде критическая секция — участок, куда нельзя заходить двум потокам одновременно. Здесь это зал с нажимной плитой: если обе группы ступят туда одновременно — пол задрожит, и ловушка захлопнется.</p>

<hr />
<h4>🗝 Дедлок (Взаимная блокировка)</h4>
<p>В реальности дедлок — это когда потоки вечно ждут друг друга. В нашем мире — это две группы, каждая держит ключ от двери другой, упрямо стоящие на своём. Время остановилось. Никто никуда не идёт.</p>

<hr />
<h4>🐲 Гонка (Race Condition)</h4>
<p>В коде гонка возникает, когда потоки одновременно читают или меняют общий ресурс. Здесь это древний Сфинкс, задающий загадку. Кто первым её разгадает, тот проходит. Но если обе партии думают, что победили первыми... беда неизбежна.</p>

<hr />
<h4>⚙️ Неатомарность</h4>
<p>Простейшие заклинания вроде <code>a = a + 1</code> обманчивы: на деле это цепочка действий. Если вмешаться в её середине, магия исказится, и результат окажется совсем не тем, что ожидалось.</p>

<hr />
<h4>🧠 Правила борьбы с хаосом</h4>
<ul>
    <li>Остерегайся мест, где сразу несколько потоков могут что-то менять.</li>
    <li>Помни: проверка условия и действие по нему — не всегда происходят мгновенно.</li>
    <li>Если есть общий ресурс — подумай, как его защитить.</li>
</ul>

@if (!string.IsNullOrEmpty(backUrl))
{
    <a class="btn btn-outline-secondary mt-4" href="@backUrl">⬅ Вернуться к заданию</a>
}
